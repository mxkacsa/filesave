<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="utf-8">
    <title>lap c√≠me</title>
    <meta name="viewport" content="width=device-width">
    <script src="jquery.js"></script>
    <script type="text/javascript" src="cordova.js"></script>
    <script type="text/javascript">
        function cw(wstring)
        {
            $("#console").append("<br>"+wstring);
        }
        function onLoad() 
        {
            $("#console").append("Page loaded");
            document.addEventListener("deviceready", program, false);
        }
        function program()
        {
            cw("Cordova running.");
            window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, gotFS, fail);
        }

        function gotFS(fileSystem) {
            cw("run gotFS - readme.txt");
            fileSystem.root.getFile("readme.txt", {create: true, exclusive: false}, gotFileEntry, fail);
        }

        function gotFileEntry(fileEntry) {
            cw("run gotFileEntry");
            fileEntry.createWriter(gotFileWriter, fail);
        }

        function gotFileWriter(writer) {
            cw("run gotFileWriter");
            writer.onwriteend = function(evt) {
                cw("contents of file now 'some sample text'");
                writer.truncate(11);  
                writer.onwriteend = function(evt) {
                    cw("contents of file now 'some sample'");
                    writer.seek(4);
                    writer.write(" different text");
                    writer.onwriteend = function(evt){
                        cw("contents of file now 'some different text'");
                    }
                };
            };
            writer.write("some sample text");
        }

        function fail(error) {
            cw("error: "+error.code);
        }
        
    </script>
</head>
<body style="margin:0px;" onload="onLoad()">
    <div id="console" style="background:black;color:white;width:100%;min-height:40px;padding:5px;"></div>
</body>
</html>
